<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>reConnect - Event Details</title>
    <!-- Lucide Icons Library -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* THEME VARIABLES DEFINITION */
        :root {
            --rc-primary-blue: #3b489a;
            --rc-accent-gold: #e1a92a;
            --rc-page-background: #f3f4f9;
            --rc-content-white: #ffffff;
            --rc-text-main-color: #1e293b;
            --rc-text-dimmed-color: #64748b;
            --rc-ui-border-soft: #e2e8f0;
            --rc-card-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        /* RESET STYLES */
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { 
            background-color: var(--rc-page-background); 
            color: var(--rc-text-main-color); 
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            -webkit-font-smoothing: antialiased;
        }

        /* TOP NAVIGATION HEADER STYLING */
        .rc-header {
            position: sticky; top: 0; z-index: 1000;
            background-color: var(--rc-primary-blue);
            color: white; padding: 12px 28px;
            display: flex; align-items: center; justify-content: space-between;
            box-shadow: 0 4px 14px rgba(0,0,0,0.1);
        }

        .rc-header-left { display: flex; align-items: center; gap: 1rem; }
        
        .rc-back-btn {
            background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.2);
            color: white; width: 38px; height: 38px; border-radius: 10px; display: flex;
            align-items: center; justify-content: center; cursor: pointer; transition: 0.2s;
        }
        .rc-back-btn:hover { background: var(--rc-accent-gold); border-color: var(--rc-accent-gold); color: var(--rc-primary-blue); transform: translateX(-3px); }

        .rc-logo-btn { background: transparent; border: none; cursor: pointer; display: flex; align-items: center; text-decoration: none; }
        .rc-logo-text { font-size: 1.8rem; font-weight: 900; letter-spacing: -1.2px; color: white; }
        .rc-logo-text span { color: var(--rc-accent-gold); }

        .rc-header-right { display: flex; align-items: center; gap: 20px; }
        .rc-profile-link { display: flex; align-items: center; gap: 12px; text-decoration: none; color: white; border-left: 1px solid rgba(255,255,255,0.2); padding-left: 20px; }

        /* SIDEBAR NAVIGATION OVERLAY */
        .rc-nav-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 90px;
            background: white; z-index: 1100; border-bottom: 4px solid var(--rc-accent-gold);
            display: flex; align-items: center; padding: 0 28px;
            transform: translateX(-100%); transition: transform 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            box-shadow: var(--rc-card-shadow);
        }
        .rc-nav-overlay.open { transform: translateX(0); }
        .rc-nav-list { display: flex; gap: 10px; flex: 1; align-items: center; padding: 0 20px; overflow-x: auto; scrollbar-width: none; }
        .rc-nav-link { 
            display: flex; align-items: center; gap: 8px; padding: 10px 20px; 
            border-radius: 50px; text-decoration: none; color: var(--rc-text-dimmed-color); 
            font-weight: 700; font-size: 0.9rem; transition: 0.2s; white-space: nowrap;
        }
        .rc-nav-link.active { background: var(--rc-primary-blue); color: white; }
        .rc-nav-link:hover:not(.active) { background: #f1f5f9; color: var(--rc-primary-blue); }

        /* MAIN CONTENT AREA */
        .rc-view-container { 
            max-width: 1100px; margin: 36px auto; padding: 0 24px; 
        }

        .rc-detail-card {
            background: var(--rc-content-white);
            border-radius: 32px;
            overflow: hidden;
            border: 1px solid var(--rc-ui-border-soft);
            box-shadow: var(--rc-card-shadow);
        }

        .rc-hero-banner {
            height: 400px;
            background-size: cover;
            background-position: center;
            position: relative;
        }
        
        .rc-hero-overlay {
            position: absolute; inset: 0;
            background: linear-gradient(transparent, rgba(0,0,0,0.7));
            display: flex; align-items: flex-end; padding: 40px;
        }

        .rc-event-category {
            background: var(--rc-accent-gold);
            color: var(--rc-primary-blue);
            padding: 6px 16px; border-radius: 50px;
            font-size: 0.8rem; font-weight: 800; text-transform: uppercase;
            letter-spacing: 1px; margin-bottom: 15px; display: inline-block;
        }

        .rc-event-title-large { color: white; font-size: 3rem; font-weight: 900; line-height: 1.1; }

        .rc-event-content-grid {
            display: grid; grid-template-columns: 1.8fr 1fr; gap: 40px; padding: 40px;
        }

        @media (max-width: 900px) {
            .rc-event-content-grid { grid-template-columns: 1fr; }
            .rc-event-title-large { font-size: 2rem; }
        }

        .rc-info-row { display: flex; gap: 30px; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 1px solid var(--rc-ui-border-soft); }
        .rc-info-item { display: flex; align-items: center; gap: 10px; color: var(--rc-text-dimmed-color); font-weight: 700; }
        .rc-info-item i { color: var(--rc-primary-blue); }

        .rc-section-title { font-size: 1.4rem; font-weight: 900; color: var(--rc-primary-blue); margin-bottom: 20px; display: flex; align-items: center; gap: 10px; }

        .rc-description { line-height: 1.8; color: #475569; font-size: 1.05rem; margin-bottom: 30px; }

        /* TIMELINE STYLING */
        .rc-timeline-box { background: #f8fafc; padding: 30px; border-radius: 24px; border: 1px solid var(--rc-ui-border-soft); }
        .rc-timeline { position: relative; padding-left: 30px; border-left: 2px dashed var(--rc-accent-gold); margin-left: 10px; }
        .rc-timeline-item { position: relative; margin-bottom: 25px; }
        .rc-timeline-item::before {
            content: ''; position: absolute; left: -37px; top: 5px; width: 12px; height: 12px;
            background: var(--rc-primary-blue); border: 3px solid var(--rc-accent-gold); border-radius: 50%;
        }
        .rc-timeline-time { font-weight: 900; color: var(--rc-primary-blue); font-size: 0.9rem; display: block; }
        .rc-timeline-task { font-weight: 600; color: var(--rc-text-main-color); margin-top: 4px; font-size: 0.95rem; }

        .rc-register-btn {
            background: var(--rc-primary-blue); color: white; border: none;
            width: 100%; padding: 18px; border-radius: 16px; font-weight: 800;
            font-size: 1.1rem; cursor: pointer; transition: 0.3s;
            display: flex; align-items: center; justify-content: center; gap: 12px;
            box-shadow: 0 4px 12px rgba(59, 72, 154, 0.3);
        }
        .rc-register-btn:hover { background: var(--rc-accent-gold); color: var(--rc-primary-blue); transform: translateY(-2px); }

        .hidden { display: none !important; }
    </style>
</head>
<body>

    <!-- SIDEBAR NAVIGATION OVERLAY -->
    <nav id="sidebarOverlay" class="rc-nav-overlay">
        <button onclick="toggleNav()" style="background:transparent; border:none; cursor:pointer; padding:10px;">
            <i data-lucide="x" color="#3b489a" size="32"></i>
        </button>
        <div class="rc-nav-list" id="navContainer">
            <!-- Nav Items injected by JS -->
        </div>
        <a href="{% url 'logout' %}" style="color:var(--rc-ui-alert-danger); text-decoration:none; font-weight:800; border-left:1px solid #eee; padding-left:24px; margin-left:12px; display:flex; align-items:center; gap:8px;">
            <i data-lucide="log-out" size="20"></i> Logout
        </a>
    </nav>

    <!-- TOP BRANDING HEADER -->
    <header class="rc-header">
        <div class="rc-header-left">
            <button class="rc-back-btn" onclick="history.back()" title="Go Back">
                <i data-lucide="chevron-left" size="24"></i>
            </button>
            <button class="rc-logo-btn" onclick="toggleNav()">
                <span class="rc-logo-text">re<span>Connect</span></span>
            </button>
        </div>

        <div class="rc-header-right">
            <i data-lucide="bell" size="24" style="cursor: pointer;"></i>
            <a href="{% url 'my_profile' %}" class="rc-profile-link">
                <div style="text-align: right; display: flex; flex-direction: column;">
                    <span style="font-weight: 800; font-size: 0.9rem;">{{ user.get_full_name|default:user.username }}</span>
                    <span style="font-size: 0.65rem; opacity: 0.85; font-weight: 800; text-transform: uppercase;">{% if user.passed_out_year %}CLASS OF {{ user.passed_out_year }}{% else %}ALUMNI{% endif %}</span>
                </div>
                {% if user.profile_picture %}<img src="{{ user.profile_picture.url }}" alt="Avatar" style="width: 40px; height: 40px; border-radius: 12px; background: white; border: 2px solid var(--uni-gold); object-fit: cover;">{% else %}<div style="width: 40px; height: 40px; border-radius: 12px; border: 2px solid var(--uni-gold); background: #f1f5f9; color: var(--uni-blue); display: flex; align-items: center; justify-content: center; font-weight: 800; font-size: 1rem;">{{ user.first_name.0|default:"U" }}</div>{% endif %}
            </a>
        </div>
    </header>

    <main class="rc-view-container" id="content-container">
        <!-- Dynamically populated by JS -->
    </main>

    <script>
        const NAV_LINKS = [
            { label: 'Dashboard', icon: 'trending-up', href: '{% url "alumni_dashboard" %}' },
            { label: 'Announcements', icon: 'megaphone', href: '{% url "announcements" %}' },
            { label: 'Connect', icon: 'users', href: '{% url "connect" %}' },
            { label: 'Events', icon: 'calendar', href: '{% url "events" %}', active: true },
            { label: 'Share', icon: 'plus-circle', href: '{% url "post" %}' },
            { label: 'Settings', icon: 'settings', href: '{% url "settings" %}' }
        ];

        const eventData = {
            {% if event %}
            id: {{ event.id }},
            title: "{{ event.title|escapejs }}",
            date: "{{ event.date_display|escapejs }}",
            category: "{{ event.category|escapejs }}",
            img: "{{ event.image_url|default:'https://images.unsplash.com/photo-1540575861501-7cf05a4b125a?auto=format&fit=crop&w=1000&q=80' }}",
            desc: "{{ event.description|escapejs }}"
            {% else %}
            id: 0, title: "Event Not Found", date: "", category: "", img: "", desc: "This event could not be found."
            {% endif %}
        };

        const timelineData = [
            {% for item in timeline %}
            { time: "{{ item.time|escapejs }}", task: "{{ item.activity|escapejs }}" }{% if not forloop.last %},{% endif %}
            {% endfor %}
        ];

        function renderNav() {
            const container = document.getElementById('navContainer');
            container.innerHTML = NAV_LINKS.map(link => `
                <a href="${link.href}" class="rc-nav-link ${link.active ? 'active' : ''}">
                    <i data-lucide="${link.icon}" size="18"></i>
                    ${link.label}
                </a>
            `).join('');
        }

        function toggleNav() { 
            document.getElementById('sidebarOverlay').classList.toggle('open'); 
        }

        function init() {
            renderNav();
            
            const event = eventData;

            if (!event.id) {
                document.getElementById('content-container').innerHTML = `
                    <div style="text-align: center; padding: 100px 0;">
                        <h2 style="color: var(--rc-primary-blue); font-weight: 900;">Event Not Found</h2>
                        <p style="color: var(--rc-text-dimmed-color); margin-top: 10px;">The event you're looking for doesn't exist or has been removed.</p>
                        <a href="{% url 'events' %}" style="display: inline-block; margin-top: 20px; background: var(--rc-primary-blue); color: white; padding: 14px 28px; border-radius: 14px; text-decoration: none; font-weight: 800;">Browse Events</a>
                    </div>
                `;
                lucide.createIcons();
                return;
            }

            document.getElementById('content-container').innerHTML = `
                <div class="rc-detail-card">
                    <div class="rc-hero-banner" style="background-image: url('${event.img}')">
                        <div class="rc-hero-overlay">
                            <div>
                                <span class="rc-event-category">${event.category}</span>
                                <h1 class="rc-event-title-large">${event.title}</h1>
                            </div>
                        </div>
                    </div>
                    <div class="rc-event-content-grid">
                        <div class="rc-main-info">
                            <div class="rc-info-row">
                                <div class="rc-info-item"><i data-lucide="calendar" size="20"></i> ${event.date}</div>
                                <div class="rc-info-item"><i data-lucide="map-pin" size="20"></i> Main Campus Hall</div>
                                <div class="rc-info-item"><i data-lucide="users" size="20"></i> 200+ Attending</div>
                            </div>
                            <h2 class="rc-section-title">About the Event</h2>
                            <p class="rc-description">${event.desc} We welcome you to return to the halls where it all began. This event will feature special guests, interactive sessions, and opportunities to connect with the next generation of engineers.</p>
                            
                            <h2 class="rc-section-title">Contact Information</h2>
                            <div class="rc-description">
                                <p><strong>Email:</strong> events@reconnect.edu</p>
                                <p><strong>Phone:</strong> +91 98765 43210</p>
                            </div>
                        </div>
                        <div class="rc-sidebar-actions">
                            <div class="rc-timeline-box">
                                <h3 class="rc-section-title" style="font-size: 1.1rem;"><i data-lucide="clock" size="18"></i> Event Schedule</h3>
                                <div class="rc-timeline">
                                    ${timelineData.map(item => `
                                        <div class="rc-timeline-item">
                                            <span class="rc-timeline-time">${item.time}</span>
                                            <p class="rc-timeline-task">${item.task}</p>
                                        </div>
                                    `).join('')}
                                </div>
                                <button class="rc-register-btn" onclick="alert('Registration Successful!')">
                                    Register Now <i data-lucide="check-circle" size="20"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            lucide.createIcons();
        }

        window.onload = init;
    </script>
</body>
</html>